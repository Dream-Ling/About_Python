<html>
<head>
  <title>Python JSON</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600753 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="4285"/>
<h1>Python JSON</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>作者：</b></td><td><i>凌小康</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><h1>Python JSON</h1><p>本章节我们将为大家介绍如何使用 Python 语言来编码和解码 JSON 对象。</p><p>JSON(JavaScript Object Notation) 是一种轻量级的数据交换格式，易于人阅读和编写。</p><hr/><h2>JSON 函数</h2><p>使用 JSON 函数需要导入 json 库：<b>import json</b>。</p><table><tr><th colspan="1" rowspan="1">函数</th><th colspan="1" rowspan="1">描述</th></tr><tr><td colspan="1" rowspan="1">json.dumps</td><td colspan="1" rowspan="1">将 Python 对象编码成 JSON 字符串</td></tr><tr><td colspan="1" rowspan="1">json.loads</td><td colspan="1" rowspan="1">将已编码的 JSON 字符串解码为 Python 对象</td></tr></table><hr/><h2>json.dumps</h2><p>json.dumps 用于将 Python 对象编码成 JSON 字符串。</p><h3>语法</h3><pre><span>json</span><span>.</span><span>dumps</span><span>(</span><span>obj</span><span>,</span><span> skipkeys</span><span>=</span><span>False</span><span>,</span><span> ensure_ascii</span><span>=</span><span>True</span><span>,</span><span> check_circular</span><span>=</span><span>True</span><span>,</span><span> allow_nan</span><span>=</span><span>True</span><span>,</span><span> cls</span><span>=</span><span>None</span><span>,</span><span> indent</span><span>=</span><span>None</span><span>,</span><span> separators</span><span>=</span><span>None</span><span>,</span><span> encoding</span><span>=</span><span>&quot;utf-8&quot;</span><span>,</span><span> </span><span>default</span><span>=</span><span>None</span><span>,</span><span> sort_keys</span><span>=</span><span>False</span><span>,</span><span> </span><span>**</span><span>kw</span><span>)</span></pre><h3>实例</h3><p>以下实例将数组编码为 JSON 格式数据：</p><pre><span>#!/usr/bin/python</span><span>
</span><span>import</span><span> json

data </span><span>=</span><span> </span><span>[</span><span> </span><span>{</span><span> </span><span>'a'</span><span> </span><span>:</span><span> </span><span>1</span><span>,</span><span> </span><span>'b'</span><span> </span><span>:</span><span> </span><span>2</span><span>,</span><span> </span><span>'c'</span><span> </span><span>:</span><span> </span><span>3</span><span>,</span><span> </span><span>'d'</span><span> </span><span>:</span><span> </span><span>4</span><span>,</span><span> </span><span>'e'</span><span> </span><span>:</span><span> </span><span>5</span><span> </span><span>}</span><span> </span><span>]</span><span>

json </span><span>=</span><span> json</span><span>.</span><span>dumps</span><span>(</span><span>data</span><span>)</span><span>
</span><span>print</span><span> json</span></pre><p>以上代码执行结果为：</p><pre><span>[{</span><span>&quot;a&quot;</span><span>:</span><span> </span><span>1</span><span>,</span><span> </span><span>&quot;c&quot;</span><span>:</span><span> </span><span>3</span><span>,</span><span> </span><span>&quot;b&quot;</span><span>:</span><span> </span><span>2</span><span>,</span><span> </span><span>&quot;e&quot;</span><span>:</span><span> </span><span>5</span><span>,</span><span> </span><span>&quot;d&quot;</span><span>:</span><span> </span><span>4</span><span>}]</span></pre><p>使用参数让 JSON 数据格式化输出：</p><pre><span>&gt;&gt;&gt;</span><span> </span><span>import</span><span> json
</span><span>&gt;&gt;&gt;</span><span> </span><span>print</span><span> json</span><span>.</span><span>dumps</span><span>({</span><span>'a'</span><span>:</span><span> </span><span>'Runoob'</span><span>,</span><span> </span><span>'b'</span><span>:</span><span> </span><span>7</span><span>},</span><span> sort_keys</span><span>=</span><span>True</span><span>,</span><span> indent</span><span>=</span><span>4</span><span>,</span><span> separators</span><span>=(</span><span>','</span><span>,</span><span> </span><span>': '</span><span>))</span><span>
</span><span>{</span><span>
    </span><span>&quot;a&quot;</span><span>:</span><span> </span><span>&quot;Runoob&quot;</span><span>,</span><span>
    </span><span>&quot;b&quot;</span><span>:</span><span> </span><span>7</span><span>
</span><span>}</span></pre><p>python 原始类型向 json 类型的转化对照表：</p><table><thead valign="bottom"><tr><th colspan="1" rowspan="1">Python</th><th colspan="1" rowspan="1">JSON</th></tr></thead><tr><td colspan="1" rowspan="1">dict</td><td colspan="1" rowspan="1">object</td></tr><tr><td colspan="1" rowspan="1">list, tuple</td><td colspan="1" rowspan="1">array</td></tr><tr><td colspan="1" rowspan="1">str, unicode</td><td colspan="1" rowspan="1">string</td></tr><tr><td colspan="1" rowspan="1">int, long, float</td><td colspan="1" rowspan="1">number</td></tr><tr><td colspan="1" rowspan="1">True</td><td colspan="1" rowspan="1">true</td></tr><tr><td colspan="1" rowspan="1">False</td><td colspan="1" rowspan="1">false</td></tr><tr><td colspan="1" rowspan="1">None</td><td colspan="1" rowspan="1">null</td></tr></table><hr/><h2>json.loads</h2><p>json.loads 用于解码 JSON 数据。该函数返回 Python 字段的数据类型。</p><h3>语法</h3><pre><span>json</span><span>.</span><span>loads</span><span>(</span><span>s</span><span>[,</span><span> encoding</span><span>[,</span><span> cls</span><span>[,</span><span> object_hook</span><span>[,</span><span> parse_float</span><span>[,</span><span> parse_int</span><span>[,</span><span> parse_constant</span><span>[,</span><span> object_pairs_hook</span><span>[,</span><span> </span><span>**</span><span>kw</span><span>]]]]]]]])</span></pre><h3>实例</h3><p>以下实例展示了Python 如何解码 JSON 对象：</p><pre><span>#!/usr/bin/python</span><span>
</span><span>import</span><span> json

jsonData </span><span>=</span><span> </span><span>'{&quot;a&quot;:1,&quot;b&quot;:2,&quot;c&quot;:3,&quot;d&quot;:4,&quot;e&quot;:5}'</span><span>;</span><span>

text </span><span>=</span><span> json</span><span>.</span><span>loads</span><span>(</span><span>jsonData</span><span>)</span><span>
</span><span>print</span><span> text</span></pre><p>以上代码执行结果为：</p><pre><span>{</span><span>u</span><span>'a'</span><span>:</span><span> </span><span>1</span><span>,</span><span> u</span><span>'c'</span><span>:</span><span> </span><span>3</span><span>,</span><span> u</span><span>'b'</span><span>:</span><span> </span><span>2</span><span>,</span><span> u</span><span>'e'</span><span>:</span><span> </span><span>5</span><span>,</span><span> u</span><span>'d'</span><span>:</span><span> </span><span>4</span><span>}</span></pre><p>json 类型转换到 python 的类型对照表：</p><table><col span="1" width="44%"></col><col span="1" width="56%"></col><thead valign="bottom"><tr><th colspan="1" rowspan="1">JSON</th><th colspan="1" rowspan="1">Python</th></tr></thead><tr><td colspan="1" rowspan="1">object</td><td colspan="1" rowspan="1">dict</td></tr><tr><td colspan="1" rowspan="1">array</td><td colspan="1" rowspan="1">list</td></tr><tr><td colspan="1" rowspan="1">string</td><td colspan="1" rowspan="1">unicode</td></tr><tr><td colspan="1" rowspan="1">number (int)</td><td colspan="1" rowspan="1">int, long</td></tr><tr><td colspan="1" rowspan="1">number (real)</td><td colspan="1" rowspan="1">float</td></tr><tr><td colspan="1" rowspan="1">true</td><td colspan="1" rowspan="1">True</td></tr><tr><td colspan="1" rowspan="1">false</td><td colspan="1" rowspan="1">False</td></tr><tr><td colspan="1" rowspan="1">null</td><td colspan="1" rowspan="1">None</td></tr></table><p>更多内容参考：<a href="https://docs.python.org/2/library/json.html" shape="rect" target="_blank">https://docs.python.org/2/library/json.html</a>。</p><hr/><h2>使用第三方库：Demjson</h2><p>Demjson 是 python 的第三方模块库，可用于编码和解码 JSON 数据，包含了 JSONLint 的格式化及校验功能。</p><p>Github 地址：<a href="https://github.com/dmeranda/demjson" shape="rect" target="_blank">https://github.com/dmeranda/demjson</a></p><p>官方地址：<a href="http://deron.meranda.us/python/demjson/" shape="rect" target="_blank">http://deron.meranda.us/python/demjson/</a></p><h3>环境配置</h3><p>在使用 Demjson 编码或解码 JSON 数据前，我们需要先安装 Demjson 模块。本教程我们会下载 <a href="http://deron.meranda.us/python/demjson/download" rel="nofollow" shape="rect" target="_blank">Demjson</a> 并安装：</p><pre><span>$ tar </span><span>-</span><span>xvzf demjson</span><span>-</span><span>2.2</span><span>.</span><span>3.tar</span><span>.</span><span>gz
$ cd demjson</span><span>-</span><span>2.2</span><span>.</span><span>3</span><span>
$ python setup</span><span>.</span><span>py install</span></pre><p>更多安装介绍查看：<a href="http://deron.meranda.us/python/demjson/install" shape="rect" target="_blank">http://deron.meranda.us/python/demjson/install</a></p><h2>JSON 函数</h2><table><tr><th colspan="1" rowspan="1">函数</th><th colspan="1" rowspan="1">描述</th></tr><tr><td colspan="1" rowspan="1">encode</td><td colspan="1" rowspan="1">将 Python 对象编码成 JSON 字符串</td></tr><tr><td colspan="1" rowspan="1">decode</td><td colspan="1" rowspan="1">将已编码的 JSON 字符串解码为 Python 对象</td></tr></table><hr/><h2>encode</h2><p>Python encode() 函数用于将 Python 对象编码成 JSON 字符串。</p><h3>语法</h3><pre><span>demjson</span><span>.</span><span>encode</span><span>(</span><span>self</span><span>,</span><span> obj</span><span>,</span><span> nest_level</span><span>=</span><span>0</span><span>)</span></pre><h3>实例</h3><p>以下实例将数组编码为 JSON 格式数据：</p><pre><span>#!/usr/bin/python</span><span>
</span><span>import</span><span> demjson

data </span><span>=</span><span> </span><span>[</span><span> </span><span>{</span><span> </span><span>'a'</span><span> </span><span>:</span><span> </span><span>1</span><span>,</span><span> </span><span>'b'</span><span> </span><span>:</span><span> </span><span>2</span><span>,</span><span> </span><span>'c'</span><span> </span><span>:</span><span> </span><span>3</span><span>,</span><span> </span><span>'d'</span><span> </span><span>:</span><span> </span><span>4</span><span>,</span><span> </span><span>'e'</span><span> </span><span>:</span><span> </span><span>5</span><span> </span><span>}</span><span> </span><span>]</span><span>

json </span><span>=</span><span> demjson</span><span>.</span><span>encode</span><span>(</span><span>data</span><span>)</span><span>
</span><span>print</span><span> json</span></pre><p>以上代码执行结果为：</p><pre><span>[{</span><span>&quot;a&quot;</span><span>:</span><span>1</span><span>,</span><span>&quot;b&quot;</span><span>:</span><span>2</span><span>,</span><span>&quot;c&quot;</span><span>:</span><span>3</span><span>,</span><span>&quot;d&quot;</span><span>:</span><span>4</span><span>,</span><span>&quot;e&quot;</span><span>:</span><span>5</span><span>}]</span></pre><hr/><h2>decode</h2><p>Python 可以使用 demjson.decode() 函数解码 JSON 数据。该函数返回 Python 字段的数据类型。</p><h3>语法</h3><pre><span>demjson</span><span>.</span><span>decode</span><span>(</span><span>self</span><span>,</span><span> txt</span><span>)</span></pre><h3>实例</h3><p>以下实例展示了Python 如何解码 JSON 对象：</p><pre><span>#!/usr/bin/python</span><span>
</span><span>import</span><span> demjson

json </span><span>=</span><span> </span><span>'{&quot;a&quot;:1,&quot;b&quot;:2,&quot;c&quot;:3,&quot;d&quot;:4,&quot;e&quot;:5}'</span><span>;</span><span>

text </span><span>=</span><span> demjson</span><span>.</span><span>decode</span><span>(</span><span>json</span><span>)</span><span>
</span><span>print</span><span>  text</span></pre><p>以上代码执行结果为：</p><pre><span>{</span><span>u</span><span>'a'</span><span>:</span><span> </span><span>1</span><span>,</span><span> u</span><span>'c'</span><span>:</span><span> </span><span>3</span><span>,</span><span> u</span><span>'b'</span><span>:</span><span> </span><span>2</span><span>,</span><span> u</span><span>'e'</span><span>:</span><span> </span><span>5</span><span>,</span><span> u</span><span>'d'</span><span>:</span><span> </span><span>4</span><span>}</span></pre><br clear="none"/></div></span>
</div></body></html> 